<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <th:block th:include="~{fragments/head}"></th:block>
</head>
<body>
<header>
    <th:block th:include="~{fragments/navbar}"></th:block>
</header>
<main class="mt-3">
    <div class="jumbotron bg-light">
        <h1 class="text-center text-dark">Order Product</h1>
        <hr class="hr-2 bg-dark w-25">

        <div class="text-center">
            <img th:src="${product.imageUrl}"
                 width="350" height="350" alt="Product">
        </div>
        <div class="form-group">
            <div class="col col-md-12 text-center mt-5">
                <span>Customer</span>
                <input th:value="${#authentication.getName()}" disabled class="disabled form-control"/>
            </div>
        </div>
        <div class="form-group">
            <div class="col col-md-12 text-center mt-5">
                <span>Name</span>
                <input th:value="${product.name}" disabled class="disabled form-control"/>
            </div>
        </div>
        <div class="row">
            <div class="col col-md-12 text-center mt-3">
                <h4>Desciption: <span th:text="${product.description}"></span></h4>
            </div>
        </div>
        <div class="row">
            <div class="col col-md-12 text-center">
                <h4>Price: <span th:text="${product.price}"></span></h4>
            </div>
        </div>
<!--        <form th:action="@{/products/order}" th:method="post"><input type="hidden" name="_csrf" value="5fe36d1b-2b95-4cfe-994a-f7798185dbad">-->
<!--            <div class="button-holder d-flex justify-content-center">-->
<!--                <input type="hidden" value="d9cc743f-1608-4626-8e0a-6844b26d795b" name="id">-->
<!--                <button type="submit" class="btn btn-success">Order Product</button>-->
<!--            </div>-->
<!--        </form>-->
        <form id="order-form" th:action="@{/orders/submit}" th:method="post">
            <div class="button-holder d-flex justify-content-center">
                <input id="tb-id" type="hidden" name="id" th:value="${product.id}" />
                <button id="btn-submit-order" type="submit" class="btn btn-success">Order Product</button>
            </div>
        </form>

    </div>
</main>
<footer>
    <th:block th:include="~{fragments/footer}"></th:block>
</footer>
<!--<script>-->
<!--    const http = (function () {-->
<!--        const send = (url, method, body) => fetch(url, {method, body: JSON.stringify(body) })-->
<!--                .then(response => response.json());-->
<!--        const post = (url, body) => send(url, 'POST', body);-->
<!--        const get = (url) => send(url, 'GET', null);-->
<!--        return {-->
<!--            send,-->
<!--            post,-->
<!--            get-->
<!--        };-->
<!--    }());-->
<!--    $("#order-form").on('submit', (ev) => {-->
<!--        const_id = $("#tb-id").val();-->

<!--        http.post("/orders/submit", {id})-->
<!--            .then(() => {-->
<!--                window.location = '/home';-->
<!--            });-->
<!--        ev.preventDefault();-->
<!--        return false;-->
<!--    });-->
<!--</script>-->
</body>
</html>